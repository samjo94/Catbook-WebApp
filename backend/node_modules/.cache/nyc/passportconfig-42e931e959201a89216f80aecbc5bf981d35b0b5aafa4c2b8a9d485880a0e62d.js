function cov_zc31s84dk(){var path="/home/samuelliu/Skolarbete/tdp013/my-app/backend/passportconfig.js";var hash="fbbe95af767162c3faa4e560eef2e00e18186c0c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/samuelliu/Skolarbete/tdp013/my-app/backend/passportconfig.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:36}},"1":{start:{line:2,column:15},end:{line:2,column:32}},"2":{start:{line:3,column:17},end:{line:3,column:36}},"3":{start:{line:4,column:22},end:{line:4,column:56}},"4":{start:{line:8,column:0},end:{line:39,column:2}},"5":{start:{line:9,column:2},end:{line:26,column:4}},"6":{start:{line:14,column:6},end:{line:24,column:9}},"7":{start:{line:15,column:8},end:{line:15,column:27}},"8":{start:{line:15,column:17},end:{line:15,column:27}},"9":{start:{line:16,column:8},end:{line:16,column:44}},"10":{start:{line:16,column:19},end:{line:16,column:44}},"11":{start:{line:18,column:8},end:{line:23,column:9}},"12":{start:{line:19,column:10},end:{line:19,column:35}},"13":{start:{line:22,column:10},end:{line:22,column:34}},"14":{start:{line:28,column:0},end:{line:30,column:4}},"15":{start:{line:29,column:3},end:{line:29,column:27}},"16":{start:{line:31,column:1},end:{line:38,column:4}},"17":{start:{line:32,column:3},end:{line:37,column:6}},"18":{start:{line:33,column:29},end:{line:35,column:6}},"19":{start:{line:36,column:5},end:{line:36,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:17},end:{line:8,column:18}},loc:{start:{line:8,column:37},end:{line:39,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:38},end:{line:25,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:40},end:{line:14,column:41}},loc:{start:{line:14,column:55},end:{line:24,column:7}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:23},end:{line:28,column:24}},loc:{start:{line:28,column:43},end:{line:30,column:2}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:26},end:{line:31,column:27}},loc:{start:{line:31,column:44},end:{line:38,column:2}},line:31},"5":{name:"(anonymous_5)",decl:{start:{line:32,column:29},end:{line:32,column:30}},loc:{start:{line:32,column:44},end:{line:37,column:4}},line:32}},branchMap:{"0":{loc:{start:{line:15,column:8},end:{line:15,column:27}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:8},end:{line:15,column:27}}],line:15},"1":{loc:{start:{line:16,column:8},end:{line:16,column:44}},type:"if",locations:[{start:{line:16,column:8},end:{line:16,column:44}},{start:{line:16,column:8},end:{line:16,column:44}}],line:16},"2":{loc:{start:{line:18,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:23,column:9}},{start:{line:18,column:8},end:{line:23,column:9}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fbbe95af767162c3faa4e560eef2e00e18186c0c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_zc31s84dk=function(){return actualCoverage;};}return actualCoverage;}cov_zc31s84dk();const User=(cov_zc31s84dk().s[0]++,require("./userschema"));const bcrypt=(cov_zc31s84dk().s[1]++,require("bcrypt"));const passport=(cov_zc31s84dk().s[2]++,require("passport"));const localStrategy=(cov_zc31s84dk().s[3]++,require("passport-local").Strategy);cov_zc31s84dk().s[4]++;module.exports=function(passport){cov_zc31s84dk().f[0]++;cov_zc31s84dk().s[5]++;passport.use(new localStrategy({usernameField:'email',passwordField:'password'},function(username,password,done){cov_zc31s84dk().f[1]++;cov_zc31s84dk().s[6]++;User.findOne({email:username},(err,user)=>{cov_zc31s84dk().f[2]++;cov_zc31s84dk().s[7]++;if(err){cov_zc31s84dk().b[0][0]++;cov_zc31s84dk().s[8]++;throw err;}else{cov_zc31s84dk().b[0][1]++;}cov_zc31s84dk().s[9]++;if(!user){cov_zc31s84dk().b[1][0]++;cov_zc31s84dk().s[10]++;return done(null,false);}else{cov_zc31s84dk().b[1][1]++;}cov_zc31s84dk().s[11]++;if(!user.validPassword(password)){cov_zc31s84dk().b[2][0]++;cov_zc31s84dk().s[12]++;return done(null,false);}else{cov_zc31s84dk().b[2][1]++;cov_zc31s84dk().s[13]++;return done(null,user);}});}));cov_zc31s84dk().s[14]++;passport.serializeUser((user,callback)=>{cov_zc31s84dk().f[3]++;cov_zc31s84dk().s[15]++;callback(null,user.id);});cov_zc31s84dk().s[16]++;passport.deserializeUser((id,callback)=>{cov_zc31s84dk().f[4]++;cov_zc31s84dk().s[17]++;User.findOne({_id:id},(err,user)=>{cov_zc31s84dk().f[5]++;const userInformation=(cov_zc31s84dk().s[18]++,{username:user.username});cov_zc31s84dk().s[19]++;callback(err,userInformation);});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0Y29uZmlnLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwiYmNyeXB0IiwicGFzc3BvcnQiLCJsb2NhbFN0cmF0ZWd5IiwiU3RyYXRlZ3kiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlIiwidXNlcm5hbWVGaWVsZCIsInBhc3N3b3JkRmllbGQiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZG9uZSIsImZpbmRPbmUiLCJlbWFpbCIsImVyciIsInVzZXIiLCJ2YWxpZFBhc3N3b3JkIiwic2VyaWFsaXplVXNlciIsImNhbGxiYWNrIiwiaWQiLCJkZXNlcmlhbGl6ZVVzZXIiLCJfaWQiLCJ1c2VySW5mb3JtYXRpb24iXSwibWFwcGluZ3MiOiIweUdBZVk7eUZBZlosS0FBTUEsQ0FBQUEsSUFBSSx5QkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUUsQ0FBQUEsUUFBUSx5QkFBR0YsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFkLENBQ0EsS0FBTUcsQ0FBQUEsYUFBYSx5QkFBR0gsT0FBTyxDQUFDLGdCQUFELENBQVAsQ0FBMEJJLFFBQTdCLENBQW5CLEMsdUJBSUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixTQUFVSixRQUFWLENBQW9CLCtDQUNuQ0EsUUFBUSxDQUFDSyxHQUFULENBQ0UsR0FBSUosQ0FBQUEsYUFBSixDQUFrQixDQUNsQkssYUFBYSxDQUFFLE9BREcsQ0FFbEJDLGFBQWEsQ0FBRSxVQUZHLENBQWxCLENBR0EsU0FBU0MsUUFBVCxDQUFtQkMsUUFBbkIsQ0FBNkJDLElBQTdCLENBQWtDLCtDQUNoQ2IsSUFBSSxDQUFDYyxPQUFMLENBQWEsQ0FBRUMsS0FBSyxDQUFFSixRQUFULENBQWIsQ0FBa0MsQ0FBQ0ssR0FBRCxDQUFNQyxJQUFOLEdBQWUsK0NBQy9DLEdBQUlELEdBQUosQ0FBUyx1REFBTUEsQ0FBQUEsR0FBTixDQUFVLENBQW5CLGdDQUQrQyx1QkFFL0MsR0FBSSxDQUFDQyxJQUFMLENBQVcseURBQU9KLENBQUFBLElBQUksQ0FBQyxJQUFELENBQU8sS0FBUCxDQUFYLENBQXlCLENBQXBDLGdDQUYrQyx3QkFJL0MsR0FBSSxDQUFDSSxJQUFJLENBQUNDLGFBQUwsQ0FBbUJOLFFBQW5CLENBQUwsQ0FBbUMsbURBQ2pDLE1BQU9DLENBQUFBLElBQUksQ0FBQyxJQUFELENBQU8sS0FBUCxDQUFYLENBQ0QsQ0FGRCxJQUdLLG1EQUNILE1BQU9BLENBQUFBLElBQUksQ0FBQyxJQUFELENBQU9JLElBQVAsQ0FBWCxDQUNELENBQ0YsQ0FWRCxFQVdELENBZkQsQ0FERixFQURtQyx3QkFvQnJDZCxRQUFRLENBQUNnQixhQUFULENBQXVCLENBQUNGLElBQUQsQ0FBT0csUUFBUCxHQUFvQixnREFDeENBLFFBQVEsQ0FBQyxJQUFELENBQU9ILElBQUksQ0FBQ0ksRUFBWixDQUFSLENBQ0QsQ0FGRixFQXBCcUMsd0JBdUJwQ2xCLFFBQVEsQ0FBQ21CLGVBQVQsQ0FBeUIsQ0FBQ0QsRUFBRCxDQUFLRCxRQUFMLEdBQWtCLGdEQUN6Q3BCLElBQUksQ0FBQ2MsT0FBTCxDQUFhLENBQUVTLEdBQUcsQ0FBRUYsRUFBUCxDQUFiLENBQTBCLENBQUNMLEdBQUQsQ0FBTUMsSUFBTixHQUFlLHdCQUN2QyxLQUFNTyxDQUFBQSxlQUFlLDBCQUFHLENBQ3RCYixRQUFRLENBQUVNLElBQUksQ0FBQ04sUUFETyxDQUFILENBQXJCLENBRHVDLHdCQUl2Q1MsUUFBUSxDQUFDSixHQUFELENBQU1RLGVBQU4sQ0FBUixDQUNELENBTEQsRUFNRCxDQVBELEVBUUEsQ0EvQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZShcIi4vdXNlcnNjaGVtYVwiKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoXCJiY3J5cHRcIik7XG5jb25zdCBwYXNzcG9ydCA9IHJlcXVpcmUoXCJwYXNzcG9ydFwiKTtcbmNvbnN0IGxvY2FsU3RyYXRlZ3kgPSByZXF1aXJlKFwicGFzc3BvcnQtbG9jYWxcIikuU3RyYXRlZ3k7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwYXNzcG9ydCkge1xuICBwYXNzcG9ydC51c2UoXG4gICAgbmV3IGxvY2FsU3RyYXRlZ3koe1xuICAgIHVzZXJuYW1lRmllbGQ6ICdlbWFpbCcsXG4gICAgcGFzc3dvcmRGaWVsZDogJ3Bhc3N3b3JkJ30sXG4gICAgZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBkb25lKXtcbiAgICAgIFVzZXIuZmluZE9uZSh7IGVtYWlsOiB1c2VybmFtZSB9LCAoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm4gZG9uZShudWxsLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKCF1c2VyLnZhbGlkUGFzc3dvcmQocGFzc3dvcmQpKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybiBkb25lKG51bGwsIHVzZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxuICApO1xuXG5wYXNzcG9ydC5zZXJpYWxpemVVc2VyKCh1c2VyLCBjYWxsYmFjaykgPT4ge1xuICAgY2FsbGJhY2sobnVsbCwgdXNlci5pZCk7XG4gfSk7XG4gcGFzc3BvcnQuZGVzZXJpYWxpemVVc2VyKChpZCwgY2FsbGJhY2spID0+IHtcbiAgIFVzZXIuZmluZE9uZSh7IF9pZDogaWQgfSwgKGVyciwgdXNlcikgPT4ge1xuICAgICBjb25zdCB1c2VySW5mb3JtYXRpb24gPSB7XG4gICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgIH07XG4gICAgIGNhbGxiYWNrKGVyciwgdXNlckluZm9ybWF0aW9uKTtcbiAgIH0pO1xuIH0pO1xufTtcbiJdfQ==